import{r as c,j as o,c as g}from"./client-nMGDAYsi.js";function h(){const[t,n]=c.useState({token:"",username:"",email:"",connected:!1,owner:"",repo:"leetcode-solutions",branch:"main",private:!1,folderStructure:"topic",loading:!1,message:"",messageType:""});c.useEffect(()=>{d()},[]);const d=async()=>{try{const e=await chrome.storage.sync.get(["github_token","github_user","auth","config","owner","repo","branch"]);e.github_token&&e.github_user?n(r=>({...r,token:e.github_token,username:e.github_user.username||"",email:e.github_user.email||"",connected:e.github_user.connected||!1})):e.auth&&n(r=>({...r,token:e.auth.token||"",username:e.auth.username||"",email:e.auth.email||"",connected:e.auth.connected||!1})),e.config?n(r=>({...r,owner:e.config.owner||"",repo:e.config.repo||"leetcode-solutions",branch:e.config.branch||"main",private:e.config.private||!1,folderStructure:e.config.folderStructure||"topic"})):n(r=>({...r,owner:e.owner||"",repo:e.repo||"leetcode-solutions",branch:e.branch||"main"}))}catch(e){console.error("Error loading settings:",e)}},p=async()=>{if(!t.token){i("Please enter a GitHub token",!1);return}n(e=>({...e,loading:!0}));try{const r=await(await fetch("https://api.github.com/user",{headers:{Authorization:`Bearer ${t.token}`,Accept:"application/vnd.github.v3+json"}})).json();if(r.login){const s={token:t.token,username:r.login,email:r.email||"",connected:!0};n(l=>({...l,username:r.login,email:r.email||"",connected:!0,owner:l.owner||r.login})),await chrome.storage.sync.set({auth:s,github_token:t.token,github_user:s}),i("GitHub connected successfully!",!0)}else i("Invalid GitHub token",!1)}catch{i("Error verifying token",!1)}finally{n(e=>({...e,loading:!1}))}},u=async()=>{try{const e={owner:t.owner,repo:t.repo,branch:t.branch,private:t.private,folderStructure:t.folderStructure,includeDescription:!0,includeTestCases:!1};await chrome.storage.sync.set({config:e,owner:t.owner,repo:t.repo,branch:t.branch}),i("Settings saved successfully!",!0)}catch{i("Error saving settings",!1)}},i=(e,r)=>{n(s=>({...s,message:e,messageType:r?"success":"error"})),setTimeout(()=>{n(s=>({...s,message:"",messageType:""}))},3e3)},a=(e,r)=>{n(s=>({...s,[e]:r}))};return o.jsxs("div",{style:{padding:"20px",fontFamily:"Arial, sans-serif",maxWidth:"600px",margin:"0 auto"},children:[o.jsx("h1",{style:{color:"#333",marginBottom:"30px"},children:"Leet2Git Settings"}),o.jsxs("div",{style:{marginBottom:"30px",padding:"20px",border:"1px solid #ddd",borderRadius:"8px"},children:[o.jsx("h2",{style:{color:"#555",marginBottom:"15px"},children:"GitHub Authentication"}),o.jsxs("div",{style:{marginBottom:"15px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"},children:"GitHub Personal Access Token:"}),o.jsx("input",{type:"password",value:t.token,onChange:e=>a("token",e.target.value),placeholder:"Enter your GitHub token",style:{width:"100%",padding:"8px",border:"1px solid #ccc",borderRadius:"4px",fontSize:"14px"}})]}),o.jsx("button",{onClick:p,disabled:t.loading||!t.token,style:{padding:"10px 20px",backgroundColor:t.connected?"#28a745":"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:t.loading||!t.token?"not-allowed":"pointer",opacity:t.loading||!t.token?.6:1},children:t.loading?"Verifying...":t.connected?"Connected":"Verify Token"}),t.connected&&o.jsxs("div",{style:{marginTop:"10px",color:"#28a745"},children:["âœ“ Connected as ",t.username]})]}),o.jsxs("div",{style:{marginBottom:"30px",padding:"20px",border:"1px solid #ddd",borderRadius:"8px"},children:[o.jsx("h2",{style:{color:"#555",marginBottom:"15px"},children:"Repository Configuration"}),o.jsxs("div",{style:{marginBottom:"15px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"},children:"Repository Owner:"}),o.jsx("input",{type:"text",value:t.owner,onChange:e=>a("owner",e.target.value),placeholder:"GitHub username or organization",style:{width:"100%",padding:"8px",border:"1px solid #ccc",borderRadius:"4px",fontSize:"14px"}})]}),o.jsxs("div",{style:{marginBottom:"15px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"},children:"Repository Name:"}),o.jsx("input",{type:"text",value:t.repo,onChange:e=>a("repo",e.target.value),placeholder:"Repository name",style:{width:"100%",padding:"8px",border:"1px solid #ccc",borderRadius:"4px",fontSize:"14px"}})]}),o.jsxs("div",{style:{marginBottom:"15px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"},children:"Branch:"}),o.jsx("input",{type:"text",value:t.branch,onChange:e=>a("branch",e.target.value),placeholder:"main",style:{width:"100%",padding:"8px",border:"1px solid #ccc",borderRadius:"4px",fontSize:"14px"}})]}),o.jsx("div",{style:{marginBottom:"15px"},children:o.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[o.jsx("input",{type:"checkbox",checked:t.private,onChange:e=>a("private",e.target.checked),style:{marginRight:"8px"}}),"Private Repository"]})}),o.jsxs("div",{style:{marginBottom:"15px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"},children:"Folder Structure:"}),o.jsxs("select",{value:t.folderStructure,onChange:e=>a("folderStructure",e.target.value),style:{width:"100%",padding:"8px",border:"1px solid #ccc",borderRadius:"4px",fontSize:"14px"},children:[o.jsx("option",{value:"topic",children:"By Topic (Array, Hash Table, etc.)"}),o.jsx("option",{value:"difficulty",children:"By Difficulty (Easy, Medium, Hard)"}),o.jsx("option",{value:"flat",children:"Flat (All in root)"})]})]}),o.jsx("button",{onClick:u,style:{padding:"10px 20px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Save Settings"})]}),t.message&&o.jsx("div",{style:{padding:"10px",borderRadius:"4px",backgroundColor:t.messageType==="success"?"#d4edda":"#f8d7da",color:t.messageType==="success"?"#155724":"#721c24",border:`1px solid ${t.messageType==="success"?"#c3e6cb":"#f5c6cb"}`},children:t.message})]})}g(document.getElementById("root")).render(o.jsx(h,{}));
