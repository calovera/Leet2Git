import{r as l,j as e,c as D}from"./client.nMGDAYsi.js";const F=o=>{const t={javascript:"js",python:"py",python3:"py",java:"java","c++":"cpp",cpp:"cpp",c:"c","c#":"cs",csharp:"cs",ruby:"rb",swift:"swift",go:"go",golang:"go",scala:"scala",kotlin:"kt",rust:"rs",php:"php",typescript:"ts",mysql:"sql",postgresql:"sql"},d=(o||"").toLowerCase().trim();return t[d]||"py"},T=({stats:o})=>{const t=i=>{const p=Date.now(),n=Math.floor((p-i)/(1e3*60));if(n<1)return"Just now";if(n<60)return`${n} min ago`;const x=Math.floor(n/60);return x<24?`${x}h ago`:`${Math.floor(x/24)}d ago`},d=i=>({Python:"#3776ab",JavaScript:"#f7df1e",Java:"#ed8b00","C++":"#00599c",Go:"#00add8",Rust:"#ce422b"})[i]||"#6b7280";return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"12px"},children:[e.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.08)",backdropFilter:"blur(12px)",borderRadius:"12px",padding:"16px",border:"1px solid rgba(255, 255, 255, 0.12)",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#ffffff",marginBottom:"4px"},children:o.streak}),e.jsx("div",{style:{fontSize:"12px",color:"rgba(255, 255, 255, 0.7)"},children:"Day Streak"})]}),e.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.08)",backdropFilter:"blur(12px)",borderRadius:"12px",padding:"16px",border:"1px solid rgba(255, 255, 255, 0.12)",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#ffffff",marginBottom:"4px"},children:o.counts.easy+o.counts.medium+o.counts.hard}),e.jsx("div",{style:{fontSize:"12px",color:"rgba(255, 255, 255, 0.7)"},children:"Total Solved"})]})]}),e.jsx("div",{style:{display:"flex",gap:"8px"},children:[{label:"Easy",count:o.counts.easy,color:"#10b981"},{label:"Medium",count:o.counts.medium,color:"#f59e0b"},{label:"Hard",count:o.counts.hard,color:"#ef4444"}].map(({label:i,count:p,color:n})=>e.jsxs("div",{style:{flex:1,background:"rgba(255, 255, 255, 0.08)",backdropFilter:"blur(12px)",borderRadius:"10px",padding:"12px",border:"1px solid rgba(255, 255, 255, 0.12)",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"18px",fontWeight:"bold",color:n,marginBottom:"2px"},children:p}),e.jsx("div",{style:{fontSize:"11px",color:"rgba(255, 255, 255, 0.7)"},children:i})]},i))}),e.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.08)",backdropFilter:"blur(12px)",borderRadius:"12px",padding:"16px",border:"1px solid rgba(255, 255, 255, 0.12)"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#ffffff",marginBottom:"12px"},children:"Recent Solves"}),o.recentSolves.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"20px",color:"rgba(255, 255, 255, 0.6)",fontSize:"13px"},children:[e.jsx("div",{style:{marginBottom:"8px",fontSize:"20px"},children:"🎯"}),e.jsx("div",{children:"No recent solutions yet"}),e.jsx("div",{children:"Start solving problems on LeetCode!"})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:o.recentSolves.slice(0,3).map((i,p)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 12px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.08)"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"500",color:"#ffffff"},children:i.title}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontSize:"10px",padding:"2px 6px",borderRadius:"4px",background:i.difficulty==="Easy"?"#10b981":i.difficulty==="Medium"?"#f59e0b":"#ef4444",color:"#ffffff",fontWeight:"500"},children:i.difficulty}),e.jsx("span",{style:{fontSize:"11px",color:"rgba(255, 255, 255, 0.7)",background:`${d(i.language)}20`,padding:"1px 4px",borderRadius:"3px"},children:i.language})]})]}),e.jsx("div",{style:{fontSize:"11px",color:"rgba(255, 255, 255, 0.5)"},children:t(i.timestamp)})]},p))})]})]})},I=({pending:o,auth:t,setHomeData:d,fetchData:i})=>{const[p,n]=l.useState(!1),[x,c]=l.useState(""),[h,m]=l.useState(new Set),S=r=>{const a=new Set(h);a.has(r)?a.delete(r):a.add(r),m(a)},v=async r=>{try{const a=o.filter(y=>(y.id||`${o.indexOf(y)}`)!==r);await chrome.storage.sync.set({pending:a}),i()}catch(a){console.error("Error deleting submission:",a)}},k=async()=>{if(!t||!t.connected){c("Please connect to GitHub first in Settings tab"),setTimeout(()=>c(""),3e3);return}n(!0),c("Syncing solutions to GitHub...");try{const r=await new Promise(a=>{chrome.runtime.sendMessage({type:"push"},a)});r.success?(c(`Successfully synced ${r.count||0} solutions!`),i()):c(`Error: ${r.error||"Unknown error occurred"}`)}catch{c("Error: Failed to sync solutions")}n(!1),setTimeout(()=>c(""),3e3)},f=p||!(t!=null&&t.connected);return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsx("button",{onClick:k,disabled:f,style:{background:f?"rgba(255, 255, 255, 0.08)":"rgba(139, 92, 246, 0.9)",color:f?"rgba(255, 255, 255, 0.5)":"#ffffff",border:"none",borderRadius:"12px",padding:"16px 24px",fontSize:"14px",fontWeight:"600",cursor:f?"not-allowed":"pointer",transition:"all 0.2s ease",opacity:f?.6:1,backdropFilter:"blur(12px)",boxShadow:f?"none":"0 4px 16px rgba(139, 92, 246, 0.3)"},children:p?"Syncing...":t!=null&&t.connected?"Sync to GitHub":"Connect GitHub First"}),x&&e.jsx("div",{style:{background:"rgba(255, 255, 255, 0.08)",backdropFilter:"blur(12px)",borderRadius:"8px",padding:"12px",border:"1px solid rgba(255, 255, 255, 0.12)",fontSize:"13px",color:"#ffffff",textAlign:"center"},children:x}),e.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.08)",backdropFilter:"blur(12px)",borderRadius:"12px",padding:"16px",border:"1px solid rgba(255, 255, 255, 0.12)"},children:[e.jsxs("div",{style:{fontSize:"14px",fontWeight:"600",color:"#ffffff",marginBottom:"12px"},children:["Pending Solutions (",o.length,")"]}),o.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"20px",color:"rgba(255, 255, 255, 0.6)",fontSize:"13px"},children:[e.jsx("div",{style:{marginBottom:"8px",fontSize:"20px"},children:"✨"}),e.jsx("div",{children:"All caught up!"}),e.jsx("div",{children:"No pending solutions to sync"})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",maxHeight:"200px",overflowY:"auto"},children:o.map((r,a)=>e.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.08)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px",flex:1},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"500",color:"#ffffff"},children:r.title}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontSize:"10px",padding:"2px 6px",borderRadius:"4px",background:r.difficulty==="Easy"?"#10b981":r.difficulty==="Medium"?"#f59e0b":"#ef4444",color:"#ffffff",fontWeight:"500"},children:r.difficulty}),e.jsx("span",{style:{fontSize:"11px",color:"rgba(255, 255, 255, 0.7)",background:"rgba(139, 92, 246, 0.2)",padding:"1px 4px",borderRadius:"3px"},children:r.language})]}),e.jsxs("div",{style:{fontSize:"10px",color:"rgba(255, 255, 255, 0.5)",marginTop:"4px",fontFamily:"monospace"},children:["📁 ",r.tag||"Algorithms","/",r.title.replace(/[^a-zA-Z0-9]/g,""),".",F(r.language)]})]}),e.jsxs("div",{style:{display:"flex",gap:"4px"},children:[e.jsx("button",{onClick:()=>S(r.id||`${a}`),style:{background:"rgba(139, 92, 246, 0.3)",color:"#ffffff",border:"none",borderRadius:"4px",padding:"4px 8px",fontSize:"10px",cursor:"pointer"},children:h.has(r.id||`${a}`)?"Hide":"Code"}),e.jsx("button",{onClick:()=>v(r.id||`${a}`),style:{background:"rgba(239, 68, 68, 0.3)",color:"#ffffff",border:"none",borderRadius:"4px",padding:"4px 8px",fontSize:"10px",cursor:"pointer"},title:"Delete this submission",children:"✕"})]})]}),h.has(r.id||`${a}`)&&e.jsx("div",{style:{padding:"8px 12px",borderTop:"1px solid rgba(255, 255, 255, 0.1)",background:"rgba(0, 0, 0, 0.2)"},children:e.jsx("pre",{style:{fontSize:"10px",color:"rgba(255, 255, 255, 0.8)",whiteSpace:"pre-wrap",wordBreak:"break-word",margin:"0",maxHeight:"150px",overflowY:"auto"},children:r.code})})]},r.id||a))})]})]})},P=({auth:o,config:t,setHomeData:d})=>{const[i,p]=l.useState(""),[n,x]=l.useState((t==null?void 0:t.owner)||""),[c,h]=l.useState((t==null?void 0:t.repo)||"leetcode-solutions"),[m,S]=l.useState((t==null?void 0:t.branch)||"main"),[v,k]=l.useState((t==null?void 0:t.private)||!1),[f,r]=l.useState((t==null?void 0:t.folderStructure)||"topic"),[a,y]=l.useState(!1),[w,g]=l.useState(""),[j,R]=l.useState(!1),[z,b]=l.useState(""),C=async()=>{if(!i.trim()){g("Please enter a GitHub token");return}y(!0),g("Verifying token...");try{const s=await new Promise(u=>{chrome.runtime.sendMessage({type:"auth",data:{token:i.trim()}},u)});s.success?(g(`✓ Connected as ${s.username}`),d(u=>({...u,auth:s.auth})),setTimeout(()=>g(""),3e3)):g(`✗ ${s.error||"Invalid token"}`)}catch{g("✗ Failed to verify token")}y(!1)},B=async()=>{const s={owner:n.trim(),repo:c.trim(),branch:m.trim(),private:v,folderStructure:f,includeDescription:!0,includeTestCases:!1};if(!s.owner||!s.repo){b("✗ Repository owner and name are required");return}R(!0),b("Saving configuration...");try{const u=await new Promise(H=>{chrome.runtime.sendMessage({type:"updateConfig",payload:s},H)});u.success?(b("✓ Configuration saved successfully"),setTimeout(()=>b(""),3e3)):b(`✗ ${u.error||"Failed to save configuration"}`)}catch{b("✗ Failed to save configuration")}R(!1)};return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.08)",backdropFilter:"blur(12px)",borderRadius:"12px",padding:"16px",border:"1px solid rgba(255, 255, 255, 0.12)"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#ffffff",marginBottom:"12px"},children:"GitHub Authentication"}),o!=null&&o.connected?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px",background:"rgba(16, 185, 129, 0.15)",borderRadius:"8px",border:"1px solid rgba(16, 185, 129, 0.25)"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#10b981"}}),e.jsxs("div",{style:{color:"#ffffff",fontSize:"13px"},children:["Connected as ",e.jsx("strong",{children:o.username})]}),e.jsx("button",{onClick:async()=>{await chrome.storage.sync.remove(["github_token","github_user","auth"]),d(s=>({...s,auth:null}))},style:{marginLeft:"auto",background:"#ef4444",color:"#fff",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"12px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(0,0,0,0.08)"},children:"Remove Token"})]}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("span",{style:{fontSize:"12px",color:"rgba(255, 255, 255, 0.7)"},children:"GitHub Personal Access Token:"}),e.jsxs("span",{style:{position:"relative",display:"inline-block"},children:[e.jsx("span",{style:{display:"inline-block",width:"16px",height:"16px",borderRadius:"50%",background:"rgba(139, 92, 246, 0.15)",color:"#a5b4fc",fontWeight:"bold",fontSize:"12px",textAlign:"center",lineHeight:"16px",cursor:"pointer"},tabIndex:0,children:"i"}),e.jsxs("span",{style:{visibility:"hidden",opacity:0,maxWidth:"260px",width:"max-content",background:"#312e81",color:"#fff",textAlign:"left",borderRadius:"8px",padding:"10px",position:"absolute",zIndex:10,left:"50%",top:"125%",transform:"translateX(-50%)",fontSize:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",transition:"opacity 0.2s",wordBreak:"break-word",overflowWrap:"break-word",whiteSpace:"normal"},className:"token-permission-tooltip",children:[e.jsx("div",{style:{position:"absolute",bottom:"100%",left:"50%",transform:"translateX(-50%)",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent",borderBottom:"7px solid #312e81"}}),e.jsx("strong",{children:"Required GitHub Token Permissions:"}),e.jsxs("ul",{style:{margin:"6px 0 0 16px",padding:0},children:[e.jsx("li",{children:"repo (full control of private repositories)"}),e.jsx("li",{children:"user (read your user profile)"})]}),e.jsx("div",{style:{marginTop:"6px"},children:"To push code, create repositories, and sync your LeetCode solutions."})]}),e.jsx("style",{children:`
                  .token-permission-tooltip {
                    pointer-events: none;
                  }
                  span[tabindex="0"]:hover + .token-permission-tooltip,
                  span[tabindex="0"]:focus + .token-permission-tooltip {
                    visibility: visible !important;
                    opacity: 1 !important;
                  }
                `})]})]}),e.jsx("input",{type:"password",value:i,onChange:s=>p(s.target.value),placeholder:"Enter your GitHub token",style:{width:"100%",padding:"8px 12px",background:"rgba(255, 255, 255, 0.08)",border:"1px solid rgba(255, 255, 255, 0.15)",borderRadius:"6px",color:"#ffffff",fontSize:"12px",outline:"none"}}),e.jsx("a",{href:"https://github.com/settings/tokens/new?scopes=repo,user&description=Leet2Git",target:"_blank",rel:"noopener noreferrer",style:{color:"#a5b4fc",fontSize:"12px",textDecoration:"underline",marginBottom:"4px"},children:"Generate a GitHub Access Token"}),e.jsx("button",{onClick:C,disabled:a,style:{background:"rgba(139, 92, 246, 0.9)",color:"#ffffff",border:"none",borderRadius:"6px",padding:"8px 16px",fontSize:"12px",fontWeight:"500",cursor:a?"not-allowed":"pointer",opacity:a?.7:1},children:a?"Verifying...":"Verify Token"}),w&&e.jsx("div",{style:{fontSize:"11px",color:w.includes("✓")?"#10b981":"#ef4444",textAlign:"center"},children:w})]})]}),e.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.08)",backdropFilter:"blur(12px)",borderRadius:"12px",padding:"16px",border:"1px solid rgba(255, 255, 255, 0.12)"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#ffffff",marginBottom:"12px"},children:"Repository Configuration"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"rgba(255, 255, 255, 0.7)",marginBottom:"4px"},children:"Repository Owner:"}),e.jsx("input",{type:"text",value:n,onChange:s=>x(s.target.value),placeholder:"GitHub username or organization",style:{width:"100%",padding:"8px 12px",background:"rgba(255, 255, 255, 0.08)",border:"1px solid rgba(255, 255, 255, 0.15)",borderRadius:"6px",color:"#ffffff",fontSize:"12px",outline:"none"}})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"rgba(255, 255, 255, 0.7)",marginBottom:"4px"},children:"Repository Name:"}),e.jsx("input",{type:"text",value:c,onChange:s=>h(s.target.value),placeholder:"leetcode-solutions",style:{width:"100%",padding:"8px 12px",background:"rgba(255, 255, 255, 0.08)",border:"1px solid rgba(255, 255, 255, 0.15)",borderRadius:"6px",color:"#ffffff",fontSize:"12px",outline:"none"}})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"rgba(255, 255, 255, 0.7)",marginBottom:"4px"},children:"Branch:"}),e.jsx("input",{type:"text",value:m,onChange:s=>S(s.target.value),placeholder:"main",style:{width:"100%",padding:"8px 12px",background:"rgba(255, 255, 255, 0.08)",border:"1px solid rgba(255, 255, 255, 0.15)",borderRadius:"6px",color:"#ffffff",fontSize:"12px",outline:"none"}})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("input",{type:"checkbox",id:"private-repo",checked:v,onChange:s=>k(s.target.checked),style:{width:"14px",height:"14px"}}),e.jsx("label",{htmlFor:"private-repo",style:{fontSize:"12px",color:"rgba(255, 255, 255, 0.7)"},children:"Private Repository"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"rgba(255, 255, 255, 0.7)",marginBottom:"4px"},children:"Folder Structure:"}),e.jsxs("select",{value:f,onChange:s=>r(s.target.value),style:{width:"100%",padding:"8px 12px",background:"rgba(255, 255, 255, 0.08)",border:"1px solid rgba(255, 255, 255, 0.15)",borderRadius:"6px",color:"#ffffff",fontSize:"12px",outline:"none"},children:[e.jsx("option",{value:"topic",style:{background:"#1a1a1a"},children:"By Topic"}),e.jsx("option",{value:"difficulty",style:{background:"#1a1a1a"},children:"By Difficulty"}),e.jsx("option",{value:"flat",style:{background:"#1a1a1a"},children:"Flat Structure"})]})]}),e.jsx("button",{onClick:B,disabled:j,style:{background:"rgba(139, 92, 246, 0.9)",color:"#ffffff",border:"none",borderRadius:"8px",padding:"10px 20px",fontSize:"12px",fontWeight:"500",cursor:j?"not-allowed":"pointer",opacity:j?.7:1,marginTop:"4px"},children:j?"Saving...":"Save Configuration"}),z&&e.jsx("div",{style:{fontSize:"11px",color:z.includes("✓")?"#10b981":"#ef4444",textAlign:"center"},children:z})]})]})]})},W=()=>{const[o,t]=l.useState("home"),[d,i]=l.useState({stats:{streak:0,counts:{easy:0,medium:0,hard:0},recentSolves:[]},pending:[],auth:null,config:{owner:"",repo:"leetcode-solutions",branch:"main",private:!1,folderStructure:"topic",includeDescription:!0,includeTestCases:!1}}),p=()=>{try{chrome.runtime.sendMessage({type:"getHomeData"},n=>{n&&n.success&&n.data?i(n.data):console.error("Failed to fetch home data:",n)})}catch(n){console.error("Failed to fetch home data:",n)}};return l.useEffect(()=>{p()},[]),l.useEffect(()=>{p()},[o]),e.jsxs("div",{style:{width:"380px",minHeight:"500px",maxHeight:"600px",background:"linear-gradient(135deg, #1e1b4b 0%, #312e81 50%, #4c1d95 100%)",display:"flex",flexDirection:"column",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',position:"relative"},children:[e.jsxs("div",{style:{padding:"16px 16px 12px 16px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[e.jsx("div",{style:{width:"32px",height:"32px",background:"rgba(255, 255, 255, 0.15)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px"},children:"🎯"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"18px",fontWeight:"bold",color:"#ffffff"},children:"Leet2Git"}),e.jsx("div",{style:{fontSize:"12px",color:"rgba(255, 255, 255, 0.7)"},children:"LeetCode → GitHub Sync"})]})]}),e.jsx("div",{style:{display:"flex",gap:"4px"},children:[{key:"home",label:"Home",icon:"🏠"},{key:"push",label:"Push",icon:"🚀"},{key:"settings",label:"Settings",icon:"⚙️"}].map(({key:n,label:x,icon:c})=>e.jsxs("button",{onClick:()=>t(n),style:{flex:1,padding:"8px 6px",background:o===n?"rgba(255, 255, 255, 0.15)":"transparent",border:"none",borderRadius:"8px",color:"#ffffff",fontSize:"11px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",transition:"all 0.2s ease"},children:[e.jsx("span",{style:{fontSize:"12px"},children:c}),e.jsx("span",{children:x})]},n))})]}),e.jsxs("div",{style:{flex:1,padding:"16px",overflowY:"auto",minHeight:0},children:[o==="home"&&d&&e.jsx(T,{stats:d.stats}),o==="push"&&d&&e.jsx(I,{pending:d.pending,auth:d.auth,setHomeData:i,fetchData:p}),o==="settings"&&d&&e.jsx(P,{auth:d.auth,config:d.config,setHomeData:i})]})]})};D(document.getElementById("root")).render(e.jsx(W,{}));
