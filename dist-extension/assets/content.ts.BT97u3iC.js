console.log("Leet2Git content script loaded");(function(){const n=window.fetch;window.fetch=function(o,e){return(typeof o=="string"?o:o instanceof URL?o.href:o.url).includes("/graphql")&&(e==null?void 0:e.method)==="POST"?(n.call(this,o,e).then.bind(n.call(this,o,e)),n.call(this,o,e).then(async a=>{var d,c;if(a.ok&&((d=a.headers.get("content-type"))!=null&&d.includes("application/json")))try{const t=await a.clone().json();if((c=t==null?void 0:t.data)!=null&&c.question){const r={slug:t.data.question.titleSlug,title:t.data.question.title,difficulty:t.data.question.difficulty,categoryTitle:t.data.question.categoryTitle,topicTags:t.data.question.topicTags||[]};chrome.runtime.sendMessage({type:"graphql_question_data",data:r},i=>{i!=null&&i.success&&console.log("[Leet2Git] GraphQL metadata sent:",r.title)})}}catch(l){console.error("[Leet2Git] Error processing GraphQL response:",l)}return a})):n.call(this,o,e)}})();(function(){const n=XMLHttpRequest.prototype.open,o=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.open=function(e,s,...a){return this._method=e,this._url=typeof s=="string"?s:s.href,n.apply(this,[e,s,...a])},XMLHttpRequest.prototype.send=function(e){var s;if(this._method==="POST"&&((s=this._url)!=null&&s.includes("/graphql"))){const a=this.onload;this.onload=function(d){var c,l;try{if(this.responseText&&((c=this.getResponseHeader("content-type"))!=null&&c.includes("application/json"))){const t=JSON.parse(this.responseText);if((l=t==null?void 0:t.data)!=null&&l.question){const r={slug:t.data.question.titleSlug,title:t.data.question.title,difficulty:t.data.question.difficulty,categoryTitle:t.data.question.categoryTitle,topicTags:t.data.question.topicTags||[]};chrome.runtime.sendMessage({type:"graphql_question_data",data:r},i=>{i!=null&&i.success&&console.log("[Leet2Git] XHR GraphQL metadata sent:",r.title)})}}}catch(t){console.error("[Leet2Git] Error processing XHR GraphQL response:",t)}a&&a.call(this,d)}}return o.call(this,e)}})();
